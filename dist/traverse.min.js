!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.X3D=t():e.X3D=t()}(self,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var s in r)e.o(r,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:r[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>s});const r=new WeakMap;function s(e){return r.get(e)??function(e){let t=1;class s{static NONE=0;static EXTERNPROTO_DECLARATIONS=t;static PROTO_DECLARATIONS=t<<=1;static ROOT_NODES=t<<=1;static IMPORTED_NODES=t<<=1;static EXTERNPROTO_DECLARATION_SCENE=t<<=1;static PROTO_DECLARATION_BODY=t<<=1;static PROTOTYPE_INSTANCES=t<<=1;static INLINE_SCENE=t<<=1;static ALL=(t<<1)-1;static*traverse(t,r){const s=new Set;t instanceof e.X3DExecutionContext&&(yield*this.#e(t,r,s)),t instanceof e.ExternProtoDeclarationArray&&(yield*this.#t(t,r,s)),t instanceof e.ProtoDeclarationArray&&(yield*this.#t(t,r,s)),t instanceof e.SFNode&&(yield*this.#r(t.getValue(),r,s)),(t instanceof e.MFNode||Array.isArray(t))&&(yield*this.#t(t,r,s)),t instanceof e.X3DBaseNode&&(yield*this.#r(t,r,s))}static*#e(e,t,r){if(!e)return!0;if(t&s.EXTERNPROTO_DECLARATIONS)for(const s of e.externprotos)yield*this.#r(s,t,r);if(t&s.PROTO_DECLARATIONS)for(const s of e.protos)yield*this.#r(s,t,r);t&s.ROOT_NODES&&(yield*this.#t(e.rootNodes,t,r)),yield e}static*#t(t,r,s){for(const o of t)yield*this.#r(o instanceof e.SFNode?o.getValue():o,r,s);return!0}static*#r(t,r,o){if(!t)return;if(o.has(t))return;o.add(t),yield*this.#s(t.getUserDefinedFields(),r,o),yield*this.#s(t.getPredefinedFields(),r,o);const a=t.getType();for(let i=a.length-1;i>=0;--i){switch(a[i]){case e.X3DConstants.X3DExternProtoDeclaration:r&this.EXTERNPROTO_DECLARATION_SCENE&&(yield*this.#e(t.getInternalScene(),r,o));break;case e.X3DConstants.X3DProtoDeclaration:r&s.PROTO_DECLARATION_BODY&&(yield*this.#e(t.getBody(),r,o));break;case e.X3DConstants.X3DPrototypeInstance:r&s.PROTOTYPE_INSTANCES&&(yield*this.#e(t.getBody(),r,o));break;case e.X3DConstants.Inline:r&this.INLINE_SCENE&&(yield*this.#e(t.getInternalScene(),r,o));break;default:continue}break}yield e.SFNodeCache.get(t)}static*#s(t,r,s){for(const o of t)switch(o.getType()){case e.X3DConstants.SFNode:yield*this.#r(o.getValue(),r,s);break;case e.X3DConstants.MFNode:yield*this.#t(o,r,s)}}}return r.set(e,s),e.SFNode.prototype.traverse=function*(e){yield*s.traverse(this,e)},e.MFNode.prototype.traverse=function*(e){yield*s.traverse(this,e)},e.X3DExecutionContext.prototype.traverse=function*(e){yield*s.traverse(this,e)},e.ProtoDeclarationArray.prototype.traverse=function*(e){yield*s.traverse(this,e)},e.ExternProtoDeclarationArray.prototype.traverse=function*(e){yield*s.traverse(this,e)},s}(e)}return t=t.default})()));